{{template "base/myaccount.html" .}}
{{define "title"}}
<title>我的账单</title>
{{end}}

{{define "functionname"}}
<h2>我的账单</h2>
{{end}}
{{define "content"}}
<ul class="nav nav-tabs" role="tablist">
    <li class="nav-item">
      <a class="nav-link active" data-toggle="tab" href="#non-pay">未支付订单</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-toggle="tab" href="#finished">已完成订单</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-toggle="tab" href="#canceled">已取消订单</a>
    </li>
  </ul>

  <!-- Tab panes -->
  <div class="tab-content" style="width: 450px">

    <div id="non-pay" class="container tab-pane active" style="width: 760px"><br>
      <h3>未支付订单</h3>
      {{range $index, $elem := .unfinished}}
      <table class="table" width="450px">
          <thead>
            <tr>
              <th width="100px">订单编号</th>
              <th width="150px">创建时间</th>
              <th width="100px">订单总价</th>
              <th width="100px">订单状态</th>
              <th>操作</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{{$elem.Id}}</td>
              <td>{{dateformat $elem.Created "2006-01-02 15:04:05"}}</td>
              <td>{{$elem.Price}}</td>
              <td>未支付</td>
              <td>
                <button id="check" onclick="change({{$elem.Id}})" class="btn btn-default">
                  查看详情
                </button>
                 <a href="/order/pay?orderid={{$elem.Id}}" class="btn btn-default">立即支付</a>
              </td>
              
            </tr>
            <tr id="{{$elem.Id}}" hidden="true">
              <td colspan="5">
                <div style="width: 100px;float: left;">商品编号：</div>            
                <div style="width: 150px;float: left;">商品名称</div>  
                <div style="width: 100px;float: left;">商品价格：</div>
                <div style="width: 100px;float: left;">商品简介：</div>        
                <div style="width: 100px;float: left;">操作</div>
                <br>
                {{range $k, $v := $elem.Data}}
                <br>
                <div style="width: 100px;float: left;">&nbsp{{.Id}}</div>            
                <div style="width: 150px;float: left;">&nbsp{{.Name}}</div>  
                <div style="width: 100px;float: left;">&nbsp{{.PriceNow}}</div>
                <div style="width: 100px;float: left;">&nbsp{{.Primary}}</div>
                <div style="width: 100px;float: left;" align="center"></div><br>
                {{end}}
              </td>
            </tr>
          </tbody>
        </table>
        {{end}}
    </div>


    <div id="finished" class="container tab-pane fade"><br>
      <h3>已完成订单</h3>
      {{range $index, $elem := .finished}}
      <table class="table" width="450px">
          <thead>
            <tr>
              <th width="100px">订单编号</th>
              <th width="150px">创建时间</th>
              <th width="100px">订单总价</th>
              <th width="100px">订单状态</th>
              <th>操作</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{{$elem.Id}}</td>
              <td>{{dateformat $elem.Created "2006-01-02 15:04:05"}}</td>
              <td>{{$elem.Price}}</td>
              <td>未支付</td>
              <td>
                <button id="check" onclick="change({{$elem.Id}})" class="btn btn-default">
                  查看详情
                </button>
              
                 
              </td>
              
            </tr>
            <tr id="{{$elem.Id}}" hidden="true">
              <td colspan="5">
                <div style="width: 100px;float: left;">商品编号：</div>            
                <div style="width: 150px;float: left;">商品名称</div>  
                <div style="width: 100px;float: left;">商品价格：</div>
                <div style="width: 100px;float: left;">商品简介：</div>        
                <div style="width: 100px;float: left;">操作</div>
                <br>
                {{range $k, $v := $elem.Data}}
                <br>
                <div style="width: 100px;float: left;">&nbsp{{.Id}}</div>            
                <div style="width: 150px;float: left;">&nbsp{{.Name}}</div>  
                <div style="width: 100px;float: left;">&nbsp{{.PriceNow}}</div>
                <div style="width: 100px;float: left;">&nbsp{{.Primary}}</div>
                <div style="width: 100px;float: left;" align="center"><a href="/download" class="btn btn-link">下载文件</a></div><br>
                {{end}}
              </td>
            </tr>
          </tbody>
        </table>
        {{end}}
    </div>


    <div id="canceled" class="container tab-pane fade"><br>
      <h3>已取消订单</h3>
     {{range $index, $elem := .canceled}}
      <table class="table" width="450px">
          <thead>
            <tr>
              <th width="100px">订单编号</th>
              <th width="150px">创建时间</th>
              <th width="100px">订单总价</th>
              <th width="100px">订单状态</th>
              <th>操作</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{{$elem.Id}}</td>
              <td>{{dateformat $elem.Created "2006-01-02 15:04:05"}}</td>
              <td>{{$elem.Price}}</td>
              <td>未支付</td>
              <td>
                <button id="check" onclick="change({{$elem.Id}})" class="btn btn-default">
                  查看详情
                </button>
              </td>
              
            </tr>
            <tr id="{{$elem.Id}}" hidden="true">
              <td colspan="5">
                <div style="width: 100px;float: left;">商品编号：</div>            
                <div style="width: 150px;float: left;">商品名称</div>  
                <div style="width: 100px;float: left;">商品价格：</div>
                <div style="width: 100px;float: left;">商品简介：</div>        
                <div style="width: 100px;float: left;">操作</div>
                <br>
                {{range $k, $v := $elem.Data}}
                <br>
                <div style="width: 100px;float: left;">&nbsp{{.Id}}</div>            
                <div style="width: 150px;float: left;">&nbsp{{.Name}}</div>  
                <div style="width: 100px;float: left;">&nbsp{{.PriceNow}}</div>
                <div style="width: 100px;float: left;">&nbsp{{.Primary}}</div>
                <div style="width: 100px;float: left;" align="center"></div><br>
                {{end}}
              </td>
            </tr>
          </tbody>
        </table>
        {{end}}
    </div>
  </div>
  <script type="text/javascript">
      function change(obj) {
           $("[id="+obj+"]").toggle();
      }
  
  </script> 
{{end}}
